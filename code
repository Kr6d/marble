#pragma config(Sensor, in3,    line,           sensorLineFollower)
#pragma config(Sensor, dgtl8,  solanoid,       sensorDigitalOut)
#pragma config(Sensor, dgtl12, button,         sensorTouch)
#pragma config(Motor,  port3,           myMotor,       tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port4,           servo,         tmotorServoStandard, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

// GLOBAL VARIABLES
bool debounce = false;
bool buttonPress = false;

// Check the light value of the marble
void checkLight() {
	if (SensorValue(line) < 1400) {
		setServo(servo, 90);
	}
	if (SensorValue(line) > 1400 && SensorValue(line) < 2650) {
		setServo(servo, 0);
	}
	if (SensorValue(line) > 2650) {
		setServo(servo, -90);
	}
}

// MAIN PROGRAM
task main() {
	buttonPress = false;
	SensorValue(solanoid) = 0;
	SensorValue(line) = 0;
	stopMotor(myMotor);
	while (true) {
		if (SensorValue(button) == 1 && buttonPress == false) {
			buttonPress = true;
		}
		if (buttonPress == true && debounce == false) {
			debounce = true;
			startMotor(myMotor, 15);
			wait(0.52);
			stopMotor(myMotor);
			wait(2.1);
			checkLight();
			SensorValue(solanoid) = 1;
			wait(0.5);
			SensorValue(solanoid) = 0;
			SensorValue(line) = 0;
			debounce = false;
		}
	}
}


